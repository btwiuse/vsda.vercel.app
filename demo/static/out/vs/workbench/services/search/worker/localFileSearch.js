/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/network","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/arrays","vs/base/common/types","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],ne=function(x){for(var t=[],y=0,b=x.length;y<b;y++)t[y]=ie[x[y]];return t},ae=this&&this.__classPrivateFieldSet||function(x,t,y,b,p){if(b==="m")throw new TypeError("Private method is not writable");if(b==="a"&&!p)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?x!==t||!p:!t.has(x))throw new TypeError("Cannot write private member to an object whose class did not declare it");return b==="a"?p.call(x,y):p?p.value=y:t.set(x,y),y},se=this&&this.__classPrivateFieldGet||function(x,t,y,b){if(y==="a"&&!b)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?x!==t||!b:!t.has(x))throw new TypeError("Cannot read private member from an object whose class did not declare it");return y==="m"?b:y==="a"?b.call(x):b?b.value:t.get(x)};define(ie[10],ne([0,1,15,2]),function(x,t,y,b){"use strict";var p,L,A,m;Object.defineProperty(t,"__esModule",{value:!0}),t.ReadonlyMapView=t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.TernarySearchTree=t.UriIterator=t.PathIterator=t.ConfigKeysIterator=t.StringIterator=t.setToString=t.mapToString=t.getOrSet=void 0;function I(n,e,s){let a=n.get(e);return a===void 0&&(a=s,n.set(e,a)),a}t.getOrSet=I;function D(n){const e=[];return n.forEach((s,a)=>{e.push(`${a} => ${s}`)}),`Map(${n.size}) {${e.join(", ")}}`}t.mapToString=D;function O(n){const e=[];return n.forEach(s=>{e.push(s)}),`Set(${n.size}) {${e.join(", ")}}`}t.setToString=O;class V{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const s=e.charCodeAt(0),a=this._value.charCodeAt(this._pos);return s-a}value(){return this._value[this._pos]}}t.StringIterator=V;class G{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?(0,b.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,b.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.ConfigKeysIterator=G;class U{constructor(e=!0,s=!0){this._splitOnBackslash=e,this._caseSensitive=s}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let s=e.length-1;s>=0;s--,this._valueLen--){const a=this._value.charCodeAt(s);if(!(a===47||this._splitOnBackslash&&a===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const s=this._value.charCodeAt(this._to);if(s===47||this._splitOnBackslash&&s===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?(0,b.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,b.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=U;var l;(function(n){n[n.Scheme=1]="Scheme",n[n.Authority=2]="Authority",n[n.Path=3]="Path",n[n.Query=4]="Query",n[n.Fragment=5]="Fragment"})(l||(l={}));class v{constructor(e,s){this._ignorePathCasing=e,this._ignoreQueryAndFragment=s,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new U(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return(0,b.compareIgnoreCase)(e,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,b.compareIgnoreCase)(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return(0,b.compare)(e,this._value.query);if(this._states[this._stateIdx]===5)return(0,b.compare)(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}t.UriIterator=v;class P{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var N;(function(n){n[n.Left=-1]="Left",n[n.Mid=0]="Mid",n[n.Right=1]="Right"})(N||(N={}));class z{constructor(e){this._iter=e}static forUris(e=()=>!1,s=()=>!1){return new z(new v(e,s))}static forPaths(e=!1){return new z(new U(void 0,!e))}static forStrings(){return new z(new V)}static forConfigKeys(){return new z(new G)}clear(){this._root=void 0}fill(e,s){if(s){const a=s.slice(0);(0,y.shuffle)(a);for(let o of a)this.set(o,e)}else{const a=e.slice(0);(0,y.shuffle)(a);for(let o of a)this.set(o[0],o[1])}}set(e,s){const a=this._iter.reset(e);let o;this._root||(this._root=new P,this._root.segment=a.value());const c=[];for(o=this._root;;){const S=a.cmp(o.segment);if(S>0)o.left||(o.left=new P,o.left.segment=a.value()),c.push([-1,o]),o=o.left;else if(S<0)o.right||(o.right=new P,o.right.segment=a.value()),c.push([1,o]),o=o.right;else if(a.hasNext())a.next(),o.mid||(o.mid=new P,o.mid.segment=a.value()),c.push([0,o]),o=o.mid;else break}const q=o.value;o.value=s,o.key=e;for(let S=c.length-1;S>=0;S--){const $=c[S][1];$.updateHeight();const ee=$.balanceFactor();if(ee<-1||ee>1){const X=c[S][0],te=c[S+1][0];if(X===1&&te===1)c[S][1]=$.rotateLeft();else if(X===-1&&te===-1)c[S][1]=$.rotateRight();else if(X===1&&te===-1)$.right=c[S+1][1]=c[S+1][1].rotateRight(),c[S][1]=$.rotateLeft();else if(X===-1&&te===1)$.left=c[S+1][1]=c[S+1][1].rotateLeft(),c[S][1]=$.rotateRight();else throw new Error;if(S>0)switch(c[S-1][0]){case-1:c[S-1][1].left=c[S][1];break;case 1:c[S-1][1].right=c[S][1];break;case 0:c[S-1][1].mid=c[S][1];break}else this._root=c[0][1]}}return q}get(e){return this._getNode(e)?.value}_getNode(e){const s=this._iter.reset(e);let a=this._root;for(;a;){const o=s.cmp(a.segment);if(o>0)a=a.left;else if(o<0)a=a.right;else if(s.hasNext())s.next(),a=a.mid;else break}return a}has(e){const s=this._getNode(e);return!(s?.value===void 0&&s?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,s){const a=this._iter.reset(e),o=[];let c=this._root;for(;c;){const q=a.cmp(c.segment);if(q>0)o.push([-1,c]),c=c.left;else if(q<0)o.push([1,c]),c=c.right;else if(a.hasNext())a.next(),o.push([0,c]),c=c.mid;else break}if(!!c){if(s?(c.left=void 0,c.mid=void 0,c.right=void 0,c.height=1):(c.key=void 0,c.value=void 0),!c.mid&&!c.value)if(c.left&&c.right){const q=this._min(c.right),{key:S,value:$,segment:ee}=q;this._delete(q.key,!1),c.key=S,c.value=$,c.segment=ee}else{const q=c.left??c.right;if(o.length>0){const[S,$]=o[o.length-1];switch(S){case-1:$.left=q;break;case 0:$.mid=q;break;case 1:$.right=q;break}}else this._root=q}for(let q=o.length-1;q>=0;q--){const S=o[q][1];S.updateHeight();const $=S.balanceFactor();if($>1?(S.right.balanceFactor()>=0||(S.right=S.right.rotateRight()),o[q][1]=S.rotateLeft()):$<-1&&(S.left.balanceFactor()<=0||(S.left=S.left.rotateLeft()),o[q][1]=S.rotateRight()),q>0)switch(o[q-1][0]){case-1:o[q-1][1].left=o[q][1];break;case 1:o[q-1][1].right=o[q][1];break;case 0:o[q-1][1].mid=o[q][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const s=this._iter.reset(e);let a=this._root,o;for(;a;){const c=s.cmp(a.segment);if(c>0)a=a.left;else if(c<0)a=a.right;else if(s.hasNext())s.next(),o=a.value||o,a=a.mid;else break}return a&&a.value||o}findSuperstr(e){const s=this._iter.reset(e);let a=this._root;for(;a;){const o=s.cmp(a.segment);if(o>0)a=a.left;else if(o<0)a=a.right;else if(s.hasNext())s.next(),a=a.mid;else return a.mid?this._entries(a.mid):void 0}}forEach(e){for(const[s,a]of this)e(a,s)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){!e||(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}_isBalanced(){const e=s=>{if(!s)return!0;const a=s.balanceFactor();return a<-1||a>1?!1:e(s.left)&&e(s.right)};return e(this._root)}}t.TernarySearchTree=z;class k{constructor(e,s){this.uri=e,this.value=s}}class W{constructor(e,s){this[p]="ResourceMap",e instanceof W?(this.map=new Map(e.map),this.toKey=s??W.defaultToKey):(this.map=new Map,this.toKey=e??W.defaultToKey)}set(e,s){return this.map.set(this.toKey(e),new k(e,s)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,s){typeof s!="undefined"&&(e=e.bind(s));for(let[a,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(p=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}t.ResourceMap=W,W.defaultToKey=n=>n.toString();class J{constructor(e,s){this[L]="ResourceSet",!e||typeof e=="function"?this._map=new W(e):(this._map=new W(s),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,s){this._map.forEach((a,o)=>e.call(s,o,o,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(L=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=J;var E;(function(n){n[n.None=0]="None",n[n.AsOld=1]="AsOld",n[n.AsNew=2]="AsNew"})(E=t.Touch||(t.Touch={}));class F{constructor(){this[A]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,s=0){const a=this._map.get(e);if(!!a)return s!==0&&this.touch(a,s),a.value}set(e,s,a=0){let o=this._map.get(e);if(o)o.value=s,a!==0&&this.touch(o,a);else{switch(o={key:e,value:s,next:void 0,previous:void 0},a){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const s=this._map.get(e);if(!!s)return this._map.delete(e),this.removeItem(s),this._size--,s.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,s){const a=this._state;let o=this._head;for(;o;){if(s?e.bind(s)(o.value,o.key,this):e(o.value,o.key,this),this._state!==a)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){const e=this,s=this._state;let a=this._head;const o={[Symbol.iterator](){return o},next(){if(e._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const c={value:a.key,done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return o}values(){const e=this,s=this._state;let a=this._head;const o={[Symbol.iterator](){return o},next(){if(e._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const c={value:a.value,done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return o}entries(){const e=this,s=this._state;let a=this._head;const o={[Symbol.iterator](){return o},next(){if(e._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const c={value:[a.key,a.value],done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return o}[(A=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let s=this._head,a=this.size;for(;s&&a>e;)this._map.delete(s.key),s=s.next,a--;this._head=s,this._size=a,s&&(s.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const s=e.next,a=e.previous;if(!s||!a)throw new Error("Invalid list");s.previous=a,a.next=s}e.next=void 0,e.previous=void 0,this._state++}touch(e,s){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(s!==1&&s!==2)){if(s===1){if(e===this._head)return;const a=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(a.previous=o,o.next=a),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(s===2){if(e===this._tail)return;const a=e.next,o=e.previous;e===this._head?(a.previous=void 0,this._head=a):(a.previous=o,o.next=a),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((s,a)=>{e.push([a,s])}),e}fromJSON(e){this.clear();for(const[s,a]of e)this.set(s,a)}}t.LinkedMap=F;class B extends F{constructor(e,s=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,s),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,s=2){return super.get(e,s)}peek(e){return super.get(e,0)}set(e,s){return super.set(e,s,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=B;class K{constructor(e){m.set(this,void 0),ae(this,m,e,"f")}get size(){return se(this,m,"f").size}forEach(e,s){se(this,m,"f").forEach(e,s)}get(e){return se(this,m,"f").get(e)}has(e){return se(this,m,"f").has(e)}entries(){return se(this,m,"f").entries()}keys(){return se(this,m,"f").keys()}values(){return se(this,m,"f").values()}[(m=new WeakMap,Symbol.iterator)](){return se(this,m,"f").entries()}}t.ReadonlyMapView=K}),define(ie[5],ne([0,1,4,3,2,16]),function(x,t,y,b,p,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function A(n){return n===47||n===92}t.isPathSeparator=A;function m(n){return n.replace(/[\\/]/g,y.posix.sep)}t.toSlashes=m;function I(n){return n.indexOf("/")===-1&&(n=m(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}t.toPosixPath=I;function D(n,e=y.posix.sep){if(!n)return"";const s=n.length,a=n.charCodeAt(0);if(A(a)){if(A(n.charCodeAt(1))&&!A(n.charCodeAt(2))){let c=3;const q=c;for(;c<s&&!A(n.charCodeAt(c));c++);if(q!==c&&!A(n.charCodeAt(c+1))){for(c+=1;c<s;c++)if(A(n.charCodeAt(c)))return n.slice(0,c+1).replace(/[\\/]/g,e)}}return e}else if(N(a)&&n.charCodeAt(1)===58)return A(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let o=n.indexOf("://");if(o!==-1){for(o+=3;o<s;o++)if(A(n.charCodeAt(o)))return n.slice(0,o+1)}return""}t.getRoot=D;function O(n){if(!b.isWindows||!n||n.length<5)return!1;let e=n.charCodeAt(0);if(e!==92||(e=n.charCodeAt(1),e!==92))return!1;let s=2;const a=s;for(;s<n.length&&(e=n.charCodeAt(s),e!==92);s++);return!(a===s||(e=n.charCodeAt(s+1),isNaN(e)||e===92))}t.isUNC=O;const V=/[\\/:\*\?"<>\|]/g,G=/[\\/]/g,U=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function l(n,e=b.isWindows){const s=e?V:G;return!(!n||n.length===0||/^\s+$/.test(n)||(s.lastIndex=0,s.test(n))||e&&U.test(n)||n==="."||n===".."||e&&n[n.length-1]==="."||e&&n.length!==n.trim().length||n.length>255)}t.isValidBasename=l;function v(n,e,s){const a=n===e;return!s||a?a:!n||!e?!1:(0,p.equalsIgnoreCase)(n,e)}t.isEqual=v;function P(n,e,s,a=y.sep){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(s){if(!(0,p.startsWithIgnoreCase)(n,e))return!1;if(e.length===n.length)return!0;let c=e.length;return e.charAt(e.length-1)===a&&c--,n.charAt(c)===a}return e.charAt(e.length-1)!==a&&(e+=a),n.indexOf(e)===0}t.isEqualOrParent=P;function N(n){return n>=65&&n<=90||n>=97&&n<=122}t.isWindowsDriveLetter=N;function z(n,e){return b.isWindows&&n.endsWith(":")&&(n+=y.sep),(0,y.isAbsolute)(n)||(n=(0,y.join)(e,n)),n=(0,y.normalize)(n),b.isWindows?(n=(0,p.rtrim)(n,y.sep),n.endsWith(":")&&(n+=y.sep)):(n=(0,p.rtrim)(n,y.sep),n||(n=y.sep)),n}t.sanitizeFilePath=z;function k(n){const e=(0,y.normalize)(n);return b.isWindows?n.length>3?!1:W(e)&&(n.length===2||e.charCodeAt(2)===92):e===y.posix.sep}t.isRootOrDriveLetter=k;function W(n,e){return(e!==void 0?e:b.isWindows)?N(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}t.hasDriveLetter=W;function J(n){return W(n)?n[0]:void 0}t.getDriveLetter=J;function E(n,e,s){return e.length>n.length?-1:n===e?0:(s&&(n=n.toLowerCase(),e=e.toLowerCase()),n.indexOf(e))}t.indexOfPath=E;function F(n){const e=n.split(":");let s,a,o;for(const c of e){const q=Number(c);(0,L.isNumber)(q)?a===void 0?a=q:o===void 0&&(o=q):s=s?[s,c].join(":"):c}if(!s)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:s,line:a!==void 0?a:void 0,column:o!==void 0?o:a!==void 0?1:void 0}}t.parseLineAndColumnAware=F;const B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function K(n,e,s=8){let a="";for(let c=0;c<s;c++)a+=B.charAt(Math.floor(Math.random()*B.length));let o;return e?o=`${e}-${a}`:o=a,n?(0,y.join)(n,o):o}t.randomPath=K}),define(ie[11],ne([0,1,3,6]),function(x,t,y,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileAccess=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var p;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebook="vscode-notebook",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls"})(p=t.Schemas||(t.Schemas={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class L{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(I){this._preferredWebSchema=I}setDelegate(I){this._delegate=I}set(I,D,O){this._hosts[I]=D,this._ports[I]=O}setConnectionToken(I,D){this._connectionTokens[I]=D}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(I){if(this._delegate)return this._delegate(I);const D=I.authority;let O=this._hosts[D];O&&O.indexOf(":")!==-1&&(O=`[${O}]`);const V=this._ports[D],G=this._connectionTokens[D];let U=`path=${encodeURIComponent(I.path)}`;return typeof G=="string"&&(U+=`&${t.connectionTokenQueryName}=${encodeURIComponent(G)}`),b.URI.from({scheme:y.isWeb?this._preferredWebSchema:p.vscodeRemoteResource,authority:`${O}:${V}`,path:"/vscode-remote-resource",query:U})}}t.RemoteAuthorities=new L;class A{asBrowserUri(I,D){const O=this.toUri(I,D);return O.scheme===p.vscodeRemote?t.RemoteAuthorities.rewrite(O):O.scheme===p.file&&(y.isNative||y.isWebWorker&&y.globals.origin===`${p.vscodeFileResource}://${A.FALLBACK_AUTHORITY}`)?O.with({scheme:p.vscodeFileResource,authority:O.authority||A.FALLBACK_AUTHORITY,query:null,fragment:null}):O}asFileUri(I,D){const O=this.toUri(I,D);return O.scheme===p.vscodeFileResource?O.with({scheme:p.file,authority:O.authority!==A.FALLBACK_AUTHORITY?O.authority:null,query:null,fragment:null}):O}toUri(I,D){return b.URI.isUri(I)?I:b.URI.parse(D.toUrl(I))}}A.FALLBACK_AUTHORITY="vscode-app",t.FileAccess=new A}),define(ie[7],ne([0,1,5,11,4,3,2,6]),function(x,t,y,b,p,L,A,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function I(U){return(0,m.uriToFsPath)(U,!0)}t.originalFSPath=I;class D{constructor(l){this._ignorePathCasing=l}compare(l,v,P=!1){return l===v?0:(0,A.compare)(this.getComparisonKey(l,P),this.getComparisonKey(v,P))}isEqual(l,v,P=!1){return l===v?!0:!l||!v?!1:this.getComparisonKey(l,P)===this.getComparisonKey(v,P)}getComparisonKey(l,v=!1){return l.with({path:this._ignorePathCasing(l)?l.path.toLowerCase():void 0,fragment:v?null:void 0}).toString()}ignorePathCasing(l){return this._ignorePathCasing(l)}isEqualOrParent(l,v,P=!1){if(l.scheme===v.scheme){if(l.scheme===b.Schemas.file)return y.isEqualOrParent(I(l),I(v),this._ignorePathCasing(l))&&l.query===v.query&&(P||l.fragment===v.fragment);if((0,t.isEqualAuthority)(l.authority,v.authority))return y.isEqualOrParent(l.path,v.path,this._ignorePathCasing(l),"/")&&l.query===v.query&&(P||l.fragment===v.fragment)}return!1}joinPath(l,...v){return m.URI.joinPath(l,...v)}basenameOrAuthority(l){return(0,t.basename)(l)||l.authority}basename(l){return p.posix.basename(l.path)}extname(l){return p.posix.extname(l.path)}dirname(l){if(l.path.length===0)return l;let v;return l.scheme===b.Schemas.file?v=m.URI.file(p.dirname(I(l))).path:(v=p.posix.dirname(l.path),l.authority&&v.length&&v.charCodeAt(0)!==47&&(console.error(`dirname("${l.toString})) resulted in a relative path`),v="/")),l.with({path:v})}normalizePath(l){if(!l.path.length)return l;let v;return l.scheme===b.Schemas.file?v=m.URI.file(p.normalize(I(l))).path:v=p.posix.normalize(l.path),l.with({path:v})}relativePath(l,v){if(l.scheme!==v.scheme||!(0,t.isEqualAuthority)(l.authority,v.authority))return;if(l.scheme===b.Schemas.file){const z=p.relative(I(l),I(v));return L.isWindows?y.toSlashes(z):z}let P=l.path||"/",N=v.path||"/";if(this._ignorePathCasing(l)){let z=0;for(const k=Math.min(P.length,N.length);z<k&&!(P.charCodeAt(z)!==N.charCodeAt(z)&&P.charAt(z).toLowerCase()!==N.charAt(z).toLowerCase());z++);P=N.substr(0,z)+P.substr(z)}return p.posix.relative(P,N)}resolvePath(l,v){if(l.scheme===b.Schemas.file){const P=m.URI.file(p.resolve(I(l),v));return l.with({authority:P.authority,path:P.path})}return v=y.toPosixPath(v),l.with({path:p.posix.resolve(l.path,v)})}isAbsolutePath(l){return!!l.path&&l.path[0]==="/"}isEqualAuthority(l,v){return l===v||l!==void 0&&v!==void 0&&(0,A.equalsIgnoreCase)(l,v)}hasTrailingPathSeparator(l,v=p.sep){if(l.scheme===b.Schemas.file){const P=I(l);return P.length>y.getRoot(P).length&&P[P.length-1]===v}else{const P=l.path;return P.length>1&&P.charCodeAt(P.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(l.fsPath)}}removeTrailingPathSeparator(l,v=p.sep){return(0,t.hasTrailingPathSeparator)(l,v)?l.with({path:l.path.substr(0,l.path.length-1)}):l}addTrailingPathSeparator(l,v=p.sep){let P=!1;if(l.scheme===b.Schemas.file){const N=I(l);P=N!==void 0&&N.length===y.getRoot(N).length&&N[N.length-1]===v}else{v="/";const N=l.path;P=N.length===1&&N.charCodeAt(N.length-1)===47}return!P&&!(0,t.hasTrailingPathSeparator)(l,v)?l.with({path:l.path+"/"}):l}}t.ExtUri=D,t.extUri=new D(()=>!1),t.extUriBiasedIgnorePathCase=new D(U=>U.scheme===b.Schemas.file?!L.isLinux:!0),t.extUriIgnorePathCase=new D(U=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function O(U,l){const v=[];for(let P=0;P<U.length;P++){const N=l(U[P]);U.some((z,k)=>k===P?!1:(0,t.isEqualOrParent)(N,l(z)))||v.push(U[P])}return v}t.distinctParents=O;var V;(function(U){U.META_DATA_LABEL="label",U.META_DATA_DESCRIPTION="description",U.META_DATA_SIZE="size",U.META_DATA_MIME="mime";function l(v){const P=new Map;v.path.substring(v.path.indexOf(";")+1,v.path.lastIndexOf(";")).split(";").forEach(k=>{const[W,J]=k.split(":");W&&J&&P.set(W,J)});const z=v.path.substring(0,v.path.indexOf(";"));return z&&P.set(U.META_DATA_MIME,z),P}U.parseMetaData=l})(V=t.DataUri||(t.DataUri={}));function G(U,l,v){if(l){let P=U.path;return P&&P[0]!==p.posix.sep&&(P=p.posix.sep+P),U.with({scheme:v,authority:l,path:P})}return U.with({scheme:v})}t.toLocalResource=G}),define(ie[8],ne([0,1,12,17,18,19,7,3]),function(x,t,y,b,p,L,A,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.MicrotaskDelay=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function I(u){return!!u&&typeof u.then=="function"}t.isThenable=I;function D(u){const i=new y.CancellationTokenSource,r=u(i.token),h=new Promise((g,C)=>{const H=i.token.onCancellationRequested(()=>{H.dispose(),i.dispose(),C(new b.CancellationError)});Promise.resolve(r).then(Y=>{H.dispose(),i.dispose(),g(Y)},Y=>{H.dispose(),i.dispose(),C(Y)})});return new class{cancel(){i.cancel()}then(g,C){return h.then(g,C)}catch(g){return this.then(void 0,g)}finally(g){return h.finally(g)}}}t.createCancelablePromise=D;function O(u,i,r){return new Promise((h,g)=>{const C=i.onCancellationRequested(()=>{C.dispose(),h(r)});u.then(h,g).finally(()=>C.dispose())})}t.raceCancellation=O;function V(u,i){return new Promise((r,h)=>{const g=i.onCancellationRequested(()=>{g.dispose(),h(new b.CancellationError)});u.then(r,h).finally(()=>g.dispose())})}t.raceCancellationError=V;async function G(u){let i=-1;const r=u.map((g,C)=>g.then(H=>(i=C,H))),h=await Promise.race(r);return u.forEach((g,C)=>{C!==i&&g.cancel()}),h}t.raceCancellablePromises=G;function U(u,i,r){let h;const g=setTimeout(()=>{h?.(void 0),r?.()},i);return Promise.race([u.finally(()=>clearTimeout(g)),new Promise(C=>h=C)])}t.raceTimeout=U;function l(u){return new Promise((i,r)=>{const h=u();I(h)?h.then(i,r):i(h)})}t.asPromise=l;class v{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(i){if(this.activePromise){if(this.queuedPromiseFactory=i,!this.queuedPromise){const r=()=>{this.queuedPromise=null;const h=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,h};this.queuedPromise=new Promise(h=>{this.activePromise.then(r,r).then(h)})}return new Promise((r,h)=>{this.queuedPromise.then(r,h)})}return this.activePromise=i(),new Promise((r,h)=>{this.activePromise.then(g=>{this.activePromise=null,r(g)},g=>{this.activePromise=null,h(g)})})}}t.Throttler=v;class P{constructor(){this.current=Promise.resolve(null)}queue(i){return this.current=this.current.then(()=>i(),()=>i())}}t.Sequencer=P;class N{constructor(){this.promiseMap=new Map}queue(i,r){const g=(this.promiseMap.get(i)??Promise.resolve()).catch(()=>{}).then(r).finally(()=>{this.promiseMap.get(i)===g&&this.promiseMap.delete(i)});return this.promiseMap.set(i,g),g}}t.SequencerByKey=N;const z=(u,i)=>{let r=!0;const h=setTimeout(()=>{r=!1,i()},u);return{isTriggered:()=>r,dispose:()=>{clearTimeout(h),r=!1}}},k=u=>{let i=!0;return queueMicrotask(()=>{i&&(i=!1,u())}),{isTriggered:()=>i,dispose:()=>{i=!1}}};t.MicrotaskDelay=Symbol("MicrotaskDelay");class W{constructor(i){this.defaultDelay=i,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(i,r=this.defaultDelay){this.task=i,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((g,C)=>{this.doResolve=g,this.doReject=C}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const g=this.task;return this.task=null,g()}}));const h=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=r===t.MicrotaskDelay?k(h):z(r,h),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new b.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}t.Delayer=W;class J{constructor(i){this.delayer=new W(i),this.throttler=new v}trigger(i,r){return this.delayer.trigger(()=>this.throttler.queue(i),r)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=J;class E{constructor(){this._isOpen=!1,this._promise=new Promise((i,r)=>{this._completePromise=i})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=E;class F extends E{constructor(i){super();this._timeout=setTimeout(()=>this.open(),i)}open(){clearTimeout(this._timeout),super.open()}}t.AutoOpenBarrier=F;function B(u,i){return i?new Promise((r,h)=>{const g=setTimeout(()=>{C.dispose(),r()},u),C=i.onCancellationRequested(()=>{clearTimeout(g),C.dispose(),h(new b.CancellationError)})}):D(r=>B(u,r))}t.timeout=B;function K(u,i=0){const r=setTimeout(u,i);return(0,L.toDisposable)(()=>clearTimeout(r))}t.disposableTimeout=K;function n(u){const i=[];let r=0;const h=u.length;function g(){return r<h?u[r++]():null}function C(H){H!=null&&i.push(H);const Y=g();return Y?Y.then(C):Promise.resolve(i)}return Promise.resolve(null).then(C)}t.sequence=n;function e(u,i=h=>!!h,r=null){let h=0;const g=u.length,C=()=>{if(h>=g)return Promise.resolve(r);const H=u[h++];return Promise.resolve(H()).then(re=>i(re)?Promise.resolve(re):C())};return C()}t.first=e;function s(u,i=h=>!!h,r=null){if(u.length===0)return Promise.resolve(r);let h=u.length;const g=()=>{h=-1;for(const C of u)C.cancel?.()};return new Promise((C,H)=>{for(const Y of u)Y.then(re=>{--h>=0&&i(re)?(g(),C(re)):h===0&&C(r)}).catch(re=>{--h>=0&&(g(),H(re))})})}t.firstParallel=s;class a{constructor(i){this._size=0,this.maxDegreeOfParalellism=i,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new p.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(i){return this._size++,new Promise((r,h)=>{this.outstandingPromises.push({factory:i,c:r,e:h}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const i=this.outstandingPromises.shift();this.runningPromises++;const r=i.factory();r.then(i.c,i.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}t.Limiter=a;class o extends a{constructor(){super(1)}}t.Queue=o;class c{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const i=new d;return this.drainers.add(i),i.p}isDrained(){for(const[,i]of this.queues)if(i.size>0)return!1;return!0}queueFor(i,r=A.extUri){const h=r.getComparisonKey(i);let g=this.queues.get(h);return g||(g=new o,p.Event.once(g.onDrained)(()=>{g?.dispose(),this.queues.delete(h),this.onDidQueueDrain()}),this.queues.set(h,g)),g}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const i of this.drainers)i.complete();this.drainers.clear()}dispose(){for(const[,i]of this.queues)i.dispose();this.queues.clear(),this.releaseDrainers()}}t.ResourceQueue=c;class q{constructor(i,r){this._token=-1,typeof i=="function"&&typeof r=="number"&&this.setIfNotSet(i,r)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(i,r){this.cancel(),this._token=setTimeout(()=>{this._token=-1,i()},r)}setIfNotSet(i,r){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,i()},r))}}t.TimeoutTimer=q;class S{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(i,r){this.cancel(),this._token=setInterval(()=>{i()},r)}}t.IntervalTimer=S;class ${constructor(i,r){this.timeoutToken=-1,this.runner=i,this.timeout=r,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(i=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,i)}get delay(){return this.timeout}set delay(i){this.timeout=i}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=$;class ee{constructor(i,r){r%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${r}ms is not a multiple of 1000ms.`),this.runner=i,this.timeout=r,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(i=this.timeout){i%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(i/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}t.ProcessTimeRunOnceScheduler=ee;class X extends ${constructor(i,r){super(i,r);this.units=[]}work(i){this.units.push(i),this.isScheduled()||this.schedule()}doRun(){const i=this.units;this.units=[],this.runner&&this.runner(i)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=X;class te extends L.Disposable{constructor(i,r){super();this.options=i,this.handler=r,this.pendingWork=[],this.throttler=this._register(new L.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(i){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+i.length>this.options.maxBufferedWork)return!1}else if(this.pending+i.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...i),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new $(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}t.ThrottledWorker=te,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=u=>{(0,m.setTimeout0)(()=>{if(i)return;const r=Date.now()+15;u(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:t.runWhenIdle=(u,i)=>{const r=requestIdleCallback(u,typeof i=="number"?{timeout:i}:void 0);let h=!1;return{dispose(){h||(h=!0,cancelIdleCallback(r))}}}}();class j{constructor(i){this._didRun=!1,this._executor=()=>{try{this._value=i()}catch(r){this._error=r}finally{this._didRun=!0}},this._handle=(0,t.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}t.IdleValue=j;async function Z(u,i,r){let h;for(let g=0;g<r;g++)try{return await u()}catch(C){h=C,await B(i)}throw h}t.retry=Z;class f{hasPending(i){return this._pending?typeof i=="number"?this._pending.taskId===i:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(i,r,h){return this._pending={taskId:i,cancel:()=>h?.(),promise:r},r.then(()=>this.donePending(i),()=>this.donePending(i)),r}donePending(i){this._pending&&i===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const i=this._next;this._next=void 0,i.run().then(i.promiseResolve,i.promiseReject)}}setNext(i){if(this._next)this._next.run=i;else{let r,h;const g=new Promise((C,H)=>{r=C,h=H});this._next={run:i,promise:g,promiseResolve:r,promiseReject:h}}return this._next.promise}}t.TaskSequentializer=f;class _{constructor(i,r=()=>Date.now()){this.interval=i,this.nowFn=r,this.lastIncrementTime=0,this.value=0}increment(){const i=this.nowFn();return i-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=i,this.value=0),this.value++,this.value}}t.IntervalCounter=_;class d{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((i,r)=>{this.completeCallback=i,this.errorCallback=r})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(i){return new Promise(r=>{this.completeCallback(i),this.resolved=!0,r()})}error(i){return new Promise(r=>{this.errorCallback(i),this.rejected=!0,r()})}cancel(){new Promise(i=>{this.errorCallback(new b.CancellationError),this.rejected=!0,i()})}}t.DeferredPromise=d;var M;(function(u){async function i(h){let g;const C=await Promise.all(h.map(H=>H.then(Y=>Y,Y=>{g||(g=Y)})));if(typeof g!="undefined")throw g;return C}u.settled=i;function r(h){return new Promise(async(g,C)=>{try{await h(g,C)}catch(H){C(H)}})}u.withAsyncBody=r})(M=t.Promises||(t.Promises={}));var R;(function(u){u[u.Initial=0]="Initial",u[u.DoneOK=1]="DoneOK",u[u.DoneError=2]="DoneError"})(R||(R={}));class T{constructor(i){this._state=0,this._results=[],this._error=null,this._onStateChanged=new p.Emitter,queueMicrotask(async()=>{const r={emitOne:h=>this.emitOne(h),emitMany:h=>this.emitMany(h),reject:h=>this.reject(h)};try{await Promise.resolve(i(r)),this.resolve()}catch(h){this.reject(h)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}static fromArray(i){return new T(r=>{r.emitMany(i)})}static fromPromise(i){return new T(async r=>{r.emitMany(await i)})}static fromPromises(i){return new T(async r=>{await Promise.all(i.map(async h=>r.emitOne(await h)))})}static merge(i){return new T(async r=>{await Promise.all(i.map(async h=>{for await(const g of h)r.emitOne(g)}))})}[Symbol.asyncIterator](){let i=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(i<this._results.length)return{done:!1,value:this._results[i++]};if(this._state===1)return{done:!0,value:void 0};await p.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(i,r){return new T(async h=>{for await(const g of i)h.emitOne(r(g))})}map(i){return T.map(this,i)}static filter(i,r){return new T(async h=>{for await(const g of i)r(g)&&h.emitOne(g)})}filter(i){return T.filter(this,i)}static coalesce(i){return T.filter(i,r=>!!r)}coalesce(){return T.coalesce(this)}static async toPromise(i){const r=[];for await(const h of i)r.push(h);return r}toPromise(){return T.toPromise(this)}emitOne(i){this._state===0&&(this._results.push(i),this._onStateChanged.fire())}emitMany(i){this._state===0&&(this._results=this._results.concat(i),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(i){this._state===0&&(this._state=2,this._error=i,this._onStateChanged.fire())}}t.AsyncIterableObject=T,T.EMPTY=T.fromArray([]);class Q extends T{constructor(i,r){super(r);this._source=i}cancel(){this._source.cancel()}}t.CancelableAsyncIterableObject=Q;function w(u){const i=new y.CancellationTokenSource,r=u(i.token);return new Q(i,async h=>{const g=i.token.onCancellationRequested(()=>{g.dispose(),i.dispose(),h.reject(new b.CancellationError)});try{for await(const C of r){if(i.token.isCancellationRequested)return;h.emitOne(C)}g.dispose(),i.dispose()}catch(C){g.dispose(),i.dispose(),h.reject(C)}})}t.createCancelableAsyncIterable=w}),define(ie[9],ne([0,1,8,5,10,4,3,2]),function(x,t,y,b,p,L,A,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function I(){return Object.create(null)}t.getEmptyExpression=I,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const D="[/\\\\]",O="[^/\\\\]",V=/\//g;function G(f,_){switch(f){case 0:return"";case 1:return`${O}*?`;default:return`(?:${D}|${O}+${D}${_?`|${D}${O}+`:""})*?`}}function U(f,_){if(!f)return[];const d=[];let M=!1,R=!1,T="";for(const Q of f){switch(Q){case _:if(!M&&!R){d.push(T),T="";continue}break;case"{":M=!0;break;case"}":M=!1;break;case"[":R=!0;break;case"]":R=!1;break}T+=Q}return T&&d.push(T),d}t.splitGlobAware=U;function l(f){if(!f)return"";let _="";const d=U(f,t.GLOB_SPLIT);if(d.every(M=>M===t.GLOBSTAR))_=".*";else{let M=!1;d.forEach((R,T)=>{if(R===t.GLOBSTAR){if(M)return;_+=G(2,T===d.length-1)}else{let Q=!1,w="",u=!1,i="";for(const r of R){if(r!=="}"&&Q){w+=r;continue}if(u&&(r!=="]"||!i)){let h;r==="-"?h=r:(r==="^"||r==="!")&&!i?h="^":r===t.GLOB_SPLIT?h="":h=(0,m.escapeRegExpCharacters)(r),i+=h;continue}switch(r){case"{":Q=!0;continue;case"[":u=!0;continue;case"}":{_+=`(?:${U(w,",").map(C=>l(C)).join("|")})`,Q=!1,w="";break}case"]":{_+="["+i+"]",u=!1,i="";break}case"?":_+=O;continue;case"*":_+=G(1);continue;default:_+=(0,m.escapeRegExpCharacters)(r)}}T<d.length-1&&(d[T+1]!==t.GLOBSTAR||T+2<d.length)&&(_+=D)}M=R===t.GLOBSTAR})}return _}const v=/^\*\*\/\*\.[\w\.-]+$/,P=/^\*\*\/([\w\.-]+)\/?$/,N=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,z=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,k=/^\*\*((\/[\w\.-]+)+)\/?$/,W=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,J=new p.LRUCache(1e4),E=function(){return!1},F=function(){return null};function B(f,_){if(!f)return F;let d;typeof f!="string"?d=f.pattern:d=f,d=d.trim();const M=`${d}_${!!_.trimForExclusions}`;let R=J.get(M);if(R)return K(R,f);let T;return v.test(d)?R=e(d.substr(4),d):(T=P.exec(n(d,_)))?R=s(T[1],d):(_.trimForExclusions?z:N).test(d)?R=a(d,_):(T=k.exec(n(d,_)))?R=o(T[1].substr(1),d,!0):(T=W.exec(n(d,_)))?R=o(T[1],d,!1):R=c(d),J.set(M,R),K(R,f)}function K(f,_){if(typeof _=="string")return f;const d=function(M,R){return(0,b.isEqualOrParent)(M,_.base,!A.isLinux)?f(M.substr(_.base.length+1),R):null};return d.allBasenames=f.allBasenames,d.allPaths=f.allPaths,d.basenames=f.basenames,d.patterns=f.patterns,d}function n(f,_){return _.trimForExclusions&&f.endsWith("/**")?f.substr(0,f.length-2):f}function e(f,_){return function(d,M){return typeof d=="string"&&d.endsWith(f)?_:null}}function s(f,_){const d=`/${f}`,M=`\\${f}`,R=function(Q,w){return typeof Q!="string"?null:w?w===f?_:null:Q===f||Q.endsWith(d)||Q.endsWith(M)?_:null},T=[f];return R.basenames=T,R.patterns=[_],R.allBasenames=T,R}function a(f,_){const d=Z(f.slice(1,-1).split(",").map(w=>B(w,_)).filter(w=>w!==F),f),M=d.length;if(!M)return F;if(M===1)return d[0];const R=function(w,u){for(let i=0,r=d.length;i<r;i++)if(d[i](w,u))return f;return null},T=d.find(w=>!!w.allBasenames);T&&(R.allBasenames=T.allBasenames);const Q=d.reduce((w,u)=>u.allPaths?w.concat(u.allPaths):w,[]);return Q.length&&(R.allPaths=Q),R}function o(f,_,d){const M=L.sep===L.posix.sep,R=M?f:f.replace(V,L.sep),T=L.sep+R,Q=L.posix.sep+f;let w;return d?w=function(u,i){return typeof u=="string"&&(u===R||u.endsWith(T)||!M&&(u===f||u.endsWith(Q)))?_:null}:w=function(u,i){return typeof u=="string"&&(u===R||!M&&u===f)?_:null},w.allPaths=[(d?"*/":"./")+f],w}function c(f){try{const _=new RegExp(`^${l(f)}$`);return function(d){return _.lastIndex=0,typeof d=="string"&&_.test(d)?f:null}}catch{return F}}function q(f,_,d){return!f||typeof _!="string"?!1:S(f)(_,void 0,d)}t.match=q;function S(f,_={}){if(!f)return E;if(typeof f=="string"||$(f)){const d=B(f,_);if(d===F)return E;const M=function(R,T){return!!d(R,T)};return d.allBasenames&&(M.allBasenames=d.allBasenames),d.allPaths&&(M.allPaths=d.allPaths),M}return te(f,_)}t.parse=S;function $(f){const _=f;return _?typeof _.base=="string"&&typeof _.pattern=="string":!1}t.isRelativePattern=$;function ee(f){return f.allBasenames||[]}t.getBasenameTerms=ee;function X(f){return f.allPaths||[]}t.getPathTerms=X;function te(f,_){const d=Z(Object.getOwnPropertyNames(f).map(w=>j(w,f[w],_)).filter(w=>w!==F)),M=d.length;if(!M)return F;if(!d.some(w=>!!w.requiresSiblings)){if(M===1)return d[0];const w=function(r,h){let g;for(let C=0,H=d.length;C<H;C++){const Y=d[C](r,h);if(typeof Y=="string")return Y;(0,y.isThenable)(Y)&&(g||(g=[]),g.push(Y))}return g?(async()=>{for(const C of g){const H=await C;if(typeof H=="string")return H}return null})():null},u=d.find(r=>!!r.allBasenames);u&&(w.allBasenames=u.allBasenames);const i=d.reduce((r,h)=>h.allPaths?r.concat(h.allPaths):r,[]);return i.length&&(w.allPaths=i),w}const R=function(w,u,i){let r,h;for(let g=0,C=d.length;g<C;g++){const H=d[g];H.requiresSiblings&&i&&(u||(u=(0,L.basename)(w)),r||(r=u.substr(0,u.length-(0,L.extname)(w).length)));const Y=H(w,u,r,i);if(typeof Y=="string")return Y;(0,y.isThenable)(Y)&&(h||(h=[]),h.push(Y))}return h?(async()=>{for(const g of h){const C=await g;if(typeof C=="string")return C}return null})():null},T=d.find(w=>!!w.allBasenames);T&&(R.allBasenames=T.allBasenames);const Q=d.reduce((w,u)=>u.allPaths?w.concat(u.allPaths):w,[]);return Q.length&&(R.allPaths=Q),R}function j(f,_,d){if(_===!1)return F;const M=B(f,d);if(M===F)return F;if(typeof _=="boolean")return M;if(_){const R=_.when;if(typeof R=="string"){const T=(Q,w,u,i)=>{if(!i||!M(Q,w))return null;const r=R.replace("$(basename)",u),h=i(r);return(0,y.isThenable)(h)?h.then(g=>g?f:null):h?f:null};return T.requiresSiblings=!0,T}}return M}function Z(f,_){const d=f.filter(w=>!!w.basenames);if(d.length<2)return f;const M=d.reduce((w,u)=>{const i=u.basenames;return i?w.concat(i):w},[]);let R;if(_){R=[];for(let w=0,u=M.length;w<u;w++)R.push(_)}else R=d.reduce((w,u)=>{const i=u.patterns;return i?w.concat(i):w},[]);const T=function(w,u){if(typeof w!="string")return null;if(!u){let r;for(r=w.length;r>0;r--){const h=w.charCodeAt(r-1);if(h===47||h===92)break}u=w.substr(r)}const i=M.indexOf(u);return i!==-1?R[i]:null};T.basenames=M,T.patterns=R,T.allBasenames=M;const Q=f.filter(w=>!w.basenames);return Q.push(T),Q}}),define(ie[13],ne([0,1,20]),function(x,t,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileResults=void 0;const b=(p,L,A)=>{let m;if(p[0]===255&&p[1]===254)m=new TextDecoder("utf-16le").decode(p);else if(p[0]===254&&p[1]===255)m=new TextDecoder("utf-16be").decode(p);else if(m=new TextDecoder("utf8").decode(p),m.slice(0,1e3).includes("\uFFFD")&&p.includes(0))return[];const I=[],D=[];let O=null,V=A.remainingResultQuota;for(;V>=0&&(O=L.exec(m));)D.push({matchStartIndex:O.index,matchedText:O[0]}),V--;if(D.length){const G=new Set,U=new Set,l=[],v=W=>m.slice(l[W].start,l[W].end);let P=0,N=null;const z=/\r?\n/g;for(;N=z.exec(m);)l.push({start:P,end:N.index}),P=N.index+N[0].length;P<m.length&&l.push({start:P,end:m.length});let k=0;for(const{matchStartIndex:W,matchedText:J}of D){if(V<0)break;for(;Boolean(l[k+1])&&W>l[k].end;)k++;let E=k;for(;Boolean(l[E+1])&&W+J.length>l[E].end;)E++;if(A.beforeContext)for(let s=Math.max(0,k-A.beforeContext);s<k;s++)G.add(s);let F="",B=0;for(let s=k;s<=E;s++){let a=v(s);A.previewOptions?.charsPerLine&&a.length>A.previewOptions.charsPerLine&&(B=Math.max(W-l[k].start-20,0),a=a.substr(B,A.previewOptions.charsPerLine)),F+=`${a}
`,U.add(s)}const K=new y.Range(k,W-l[k].start,E,W+J.length-l[E].start),n=new y.Range(0,W-l[k].start-B,E-k,W+J.length-l[E].start-(E===k?B:0)),e={ranges:K,preview:{text:F,matches:n}};if(I.push(e),A.afterContext)for(let s=E+1;s<=Math.min(E+A.afterContext,l.length-1);s++)G.add(s)}for(const W of G)U.has(W)||I.push({text:v(W),lineNumber:W+1})}return I};t.getFileResults=b}),define(ie[14],ne([0,1,9]),function(x,t,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IgnoreFile=void 0;class b{constructor(L,A,m){this.isPathIgnored=this.parseIgnoreFile(L,A,m)}isPathIncludedInTraversal(L,A){if(L[0]!=="/"||L[L.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+L);return!this.isPathIgnored(L,A)}isArbitraryPathIgnored(L,A){if(L[0]!=="/"||L[L.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+L);const m=L.split("/").filter(O=>O);let I=!1,D="";for(let O=0;O<m.length;O++){const V=O===m.length-1,G=m[O];if(D=D+"/"+G,!this.isPathIncludedInTraversal(D,V?A:!0)){I=!0;break}}return I}gitignoreLinesToExpression(L,A,m){const I=L.map(O=>this.gitignoreLineToGlob(O,A)),D=Object.create(null);for(const O of I)D[O]=!0;return y.parse(D,{trimForExclusions:m})}parseIgnoreFile(L,A,m){const I=L.split(`
`).map(k=>k.trim()).filter(k=>k&&k[0]!=="#"),D=I.filter(k=>!k.endsWith("/")),O=D.filter(k=>!k.includes("!")),V=this.gitignoreLinesToExpression(O,A,!0),G=D.filter(k=>k.includes("!")).map(k=>k.replace(/!/g,"")),U=this.gitignoreLinesToExpression(G,A,!1),l=I.filter(k=>!k.includes("!")),v=this.gitignoreLinesToExpression(l,A,!0),P=I.filter(k=>k.includes("!")).map(k=>k.replace(/!/g,"")),N=this.gitignoreLinesToExpression(P,A,!1);return(k,W)=>k.startsWith(A)?W&&v(k)&&!N(k)||V(k)&&!U(k)?!0:m?m.isPathIgnored(k,W):!1:!1}gitignoreLineToGlob(L,A){const m=L.indexOf("/");return m===-1||m===L.length-1?L="**/"+L:(m===0&&(L=L.slice(1)),L=A+L),L}}t.IgnoreFile=b}),define(ie[21],ne([0,1,9,6,4,12,13,14,2,8,7]),function(x,t,y,b,p,L,A,m,I,D,O){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalFileSearchSimpleWorker=t.create=void 0;const V=!1,G=+new Date,U={},l=async(E,F)=>{if(!V)return F();const B=Date.now(),K=(U[E]??0)+1;console.info(E,K,"starting",Math.round((B-G)*10)/1e4),U[E]=K;const n=await F(),e=Date.now();return console.info(E,K,"took",e-B),n};function v(E){return new P(E)}t.create=v;class P{constructor(F){this.host=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}registerCancellationToken(F){const B=new L.CancellationTokenSource;return this.cancellationTokens.set(F,B),B}async listDirectory(F,B,K,n,e){const s=z(K),a=new O.ExtUri(()=>n),o=this.registerCancellationToken(e),c=[];let q=!1,S=0;const $=B.maxResults||512,ee=B.filePattern?X=>B.filePattern.split("").every(te=>X.includes(te)):X=>!0;return await l("listDirectory",()=>this.walkFolderQuery(F,k(B),s,a,X=>{if(!!ee(X.name))return S++,$&&S>$&&(q=!0,o.cancel()),c.push(X.path)},o.token)),{results:c,limitHit:q}}async searchDirectory(F,B,K,n,e){const s=z(K),a=new O.ExtUri(()=>n);return l("searchInFiles",async()=>{const o=this.registerCancellationToken(e),c=[],q=N(B.contentPattern),S=[];let $=0,ee=0,X=!1;const te=async j=>{if(o.token.isCancellationRequested)return;$++;const Z=await j.resolve();if(o.token.isCancellationRequested)return;const f=new Uint8Array(Z),_=(0,A.getFileResults)(f,q,{afterContext:B.afterContext??0,beforeContext:B.beforeContext??0,previewOptions:B.previewOptions,remainingResultQuota:B.maxResults?B.maxResults-ee:1e4});if(_.length){ee+=_.length,B.maxResults&&ee>B.maxResults&&o.cancel();const d={resource:b.URI.joinPath(s.folder,j.path),results:_};this.host.sendTextSearchMatch(d,e),c.push(d)}};return await l("walkFolderToResolve",()=>this.walkFolderQuery(F,k(B),s,a,async j=>S.push(te(j)),o.token)),await l("resolveOngoingProcesses",()=>Promise.all(S)),V&&console.log("Searched in",$,"files"),{results:c,limitHit:X}})}async walkFolderQuery(F,B,K,n,e,s){const a=y.parse(K.excludePattern??{},{trimForExclusions:!0}),o=(j,Z,f)=>(j=j.slice(1),!!(a(j,Z,f)||W(B,j))),c=(j,Z,f)=>(j=j.slice(1),!(a(j,Z,f)||!J(B,j,n))),q=(j,Z)=>({type:"file",name:j.name,path:Z,resolve:()=>j.getFile().then(_=>_.arrayBuffer())}),S=j=>j.kind==="directory",$=j=>j.kind==="file",ee=async(j,Z,f)=>{if(!K.disregardIgnoreFiles){const d=await Promise.all([j.getFileHandle(".gitignore").catch(M=>{}),j.getFileHandle(".ignore").catch(M=>{})]);await Promise.all(d.map(async M=>{if(!M)return;const R=new TextDecoder("utf8").decode(new Uint8Array(await(await M.getFile()).arrayBuffer()));f=new m.IgnoreFile(R,Z,f)}))}const _=D.Promises.withAsyncBody(async d=>{const M=[],R=[],T=[],Q=new Set;for await(const w of j.entries())T.push(w),Q.add(w[0]);for(const[w,u]of T){if(s.isCancellationRequested)break;const i=Z+w;if(f&&!f.isPathIncludedInTraversal(i,u.kind==="directory"))continue;const r=h=>Q.has(h);S(u)&&!o(i,w,r)?R.push(ee(u,i+"/",f)):$(u)&&c(i,w,r)&&M.push(q(u,i))}d([...await Promise.all(R),...M])});return{type:"dir",name:j.name,entries:_}},X=async(j,Z)=>{s.isCancellationRequested||await Promise.all((await j.entries).sort((f,_)=>-(f.type==="dir"?0:1)+(_.type==="dir"?0:1)).map(async f=>f.type==="dir"?X(f,Z):Z(f)))},te=await l("process",()=>ee(F,"/"));await l("resolve",()=>X(te,e))}}t.LocalFileSearchSimpleWorker=P;function N(E){return(0,I.createRegExp)(E.pattern,!!E.isRegExp,{wholeWord:E.isWordMatch,global:!0,matchCase:E.isCaseSensitive,multiline:!0,unicode:!0})}function z(E){return{...E,folder:b.URI.revive(E.folder)}}function k(E){return{...E,extraFileResources:E.extraFileResources?.map(F=>b.URI.revive(F)),folderQueries:E.folderQueries.map(F=>z(F))}}function W(E,F){return!!(E.excludePattern&&y.match(E.excludePattern,F))}function J(E,F,B){return E.excludePattern&&y.match(E.excludePattern,F)?!1:E.includePattern||E.usingSearchPaths?E.includePattern&&y.match(E.includePattern,F)?!0:E.usingSearchPaths?!!E.folderQueries&&E.folderQueries.some(K=>{const n=K.folder,e=b.URI.file(F);if(B.isEqualOrParent(e,n)){const s=p.relative(n.path,e.path);return!K.includePattern||!!y.match(K.includePattern,s)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/35e32acbb5092c636f38673cc6a41300bbe8f83d/core/vs/workbench/services/search/worker/localFileSearch.js.map
